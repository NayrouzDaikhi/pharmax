{% extends 'base_simple.html.twig' %}

{% block title %}{{'Comments - Pharmax'|trans}}{% endblock %}

{% block page_header %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="mb-2">{{'Comments Management'|trans}}</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item"><a href="/">{{'Dashboard'|trans}}</a></li>
                <li class="breadcrumb-item active">{{'Comments'|trans}}</li>
            </ol>
        </nav>
    </div>
    <a href="{{ path('app_commentaire_new') }}" class="btn btn-primary">
        <i class="bx bx-plus"></i> {{'New Comment'|trans}}
    </a>
</div>
{% endblock %}

{% block body %}
<div class="card">
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>{{'ID'|trans}}</th>
                    <th>{{'Article'|trans}}</th>
                    <th>{{'Content'|trans}}</th>
                    <th>{{'Published'|trans}}</th>
                    <th>{{'Status'|trans}}</th>
                </tr>
            </thead>
            <tbody>
                {% if commentaires is not empty %}
                    {% for commentaire in commentaires %}
                    <tr class="table-row-clickable comment-row" data-href="{{ path('app_commentaire_show', {'id': commentaire.id}) }}" data-article-id="{{ commentaire.article.id }}" role="button">
                        <td>
                            <code class="text-info">#{{ commentaire.id }}</code>
                        </td>
                        <td>
                            <span class="badge badge-light">{{ commentaire.article.titre }}</span>
                        </td>
                        <td>
                            <p class="text-muted mb-0">
                                {% if commentaire.contenu|length > 50 %}
                                    {{ commentaire.contenu|slice(0, 50) }}...
                                {% else %}
                                    {{ commentaire.contenu }}
                                {% endif %}
                            </p>
                        </td>
                        <td>
                            <small class="text-muted">{{ commentaire.datePublication ? commentaire.datePublication|date('d M Y') : 'N/A' }}</small>
                        </td>
                        <td>
                            {% if commentaire.statut == 'approuvÃ©' %}
                                <span class="badge badge-success">{{'Approved'|trans}}</span>
                            {% elseif commentaire.statut == 'en attente' %}
                                <span class="badge badge-warning">{{'Pending'|trans}}</span>
                            {% else %}
                                <span class="badge badge-secondary">{{ commentaire.statut }}</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="5" class="text-center py-5">
                            <i class="bx bx-inbox" style="font-size: 2rem; color: #ccc;"></i>
                            <p class="text-muted mt-2">{{'No comments found.'|trans}} <a href="{{ path('app_commentaire_new') }}">{{'Create one'|trans}}</a></p>
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
